<?xml version="1.0" encoding="UTF-8" ?>
 
 <!--

    Scene with an animated row of boxes.

-->

<scene>

  <script>
    var boxes = [],
      startPosition = new Vector(20,0,0);

    function addBox(index){
      var el = scene.createElement("box");

      el.position = startPosition.add(new Vector3(0,0,index * 10));
      el.color = "#00ff00";

      scene.appendChild(el);
    }

    var i;

    for(i=0;i<10;i++){
      addBox(i);
    }

    var speed = 1.0 / 10;

    setInterval(function(){
      boxes.forEach(function(box){
        box.position.z += speed;
      })
    }, 1000 / 10);

    setInterval(function(){
      boxes.unshift().remove();
      addBox(0);
    }, 1000 * 2)
  </script>

</scene>